(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{sN2L:function(e,t,n){"use strict";n.r(t),n.d(t,"OpenAbsencesModule",function(){return se});var s=n("PCNd"),c=n("tyNb"),i=n("2Vo4"),r=n("XNiG"),o=n("VRyK"),a=n("itXk"),l=n("UXun"),b=n("lJxs"),d=n("IzEk"),p=n("CCnw"),u=n("CqUA"),g=n("eB9A"),h=n("jiSq"),m=n("j9z6"),f=n("5QKP"),O=n("IClS"),y=n("fXoL");let S=(()=>{class e{constructor(e,t,n){this.lessonPresencesService=e,this.selectionService=t,this.loadingService=n,this.loading$=this.loadingService.loading$,this.search$=new i.a(""),this.updateUnconfirmedAbsences$=new r.a,this.unconfirmedAbsences$=Object(o.a)(this.loadUnconfirmedAbsences(),this.updateUnconfirmedAbsences$).pipe(Object(l.a)(1)),this.entries$=this.unconfirmedAbsences$.pipe(Object(b.a)(m.a),Object(l.a)(1)),this.sortCriteriaSubject$=new i.a({primarySortKey:"date",ascending:!1}),this.sortCriteria$=this.sortCriteriaSubject$.asObservable(),this.sortedEntries$=Object(a.a)([this.entries$,this.sortCriteria$]).pipe(Object(b.a)(Object(g.a)(m.e))),this.filteredEntries$=Object(a.a)([this.sortedEntries$,this.search$]).pipe(Object(b.a)(Object(g.a)(h.a)),Object(l.a)(1)),this.currentDetail=null}getUnconfirmedAbsences(e,t){return this.entries$.pipe(Object(b.a)(n=>{const s=n.find(n=>n.dateString===e&&n.studentId===t);return s?s.absences:[]}))}getAllUnconfirmedAbsencesForStudent(e){return this.entries$.pipe(Object(b.a)(t=>t.filter(t=>t.studentId===e).reduce((e,t)=>e.concat(t.absences),[])))}toggleSort(e){this.sortCriteriaSubject$.pipe(Object(d.a)(1)).subscribe(t=>{this.sortCriteriaSubject$.next(t.primarySortKey===e?{primarySortKey:e,ascending:!t.ascending}:{primarySortKey:e,ascending:"name"===e})})}get confirmBackLink(){return this.currentDetail?["/open-absences/detail",this.currentDetail.personId,this.currentDetail.date]:["/open-absences"]}updateAfterConfirm(){Object(a.a)([this.unconfirmedAbsences$.pipe(Object(d.a)(1)),this.selectionService.selectedIds$.pipe(Object(d.a)(1))]).pipe(Object(b.a)(Object(g.a)(m.d))).subscribe(e=>{this.selectionService.clear(),this.updateUnconfirmedAbsences$.next(e)})}buildMailToString(e,t,n){const s=e.Email,c=n["open-absences"].detail.mail.subject,i=t.map(e=>Object(O.d)(e)).join("%0D%0A");return`${s}?subject=${c}&body=${n["open-absences"].detail.mail.body}%0D%0A${i}`}loadUnconfirmedAbsences(){return this.loadingService.load(this.lessonPresencesService.getListOfUnconfirmed())}}return e.\u0275fac=function(t){return new(t||e)(y.Zb(p.a),y.Zb(f.a),y.Zb(u.a))},e.\u0275prov=y.Ib({token:e,factory:e.\u0275fac}),e})();var v=n("qUtt");let C=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=y.Gb({type:e,selectors:[["erz-open-absences"]],features:[y.yb([S,{provide:v.a,useExisting:S}])],decls:1,vars:0,template:function(e,t){1&e&&y.Nb(0,"router-outlet")},directives:[c.k],styles:[""],changeDetection:0}),e})();var P=n("yl8S"),$=n("EOpz"),M=n("ofXK"),j=n("U+jE"),k=n("4Kj8"),_=n("sYmb"),x=n("73sZ");function A(e,t){if(1&e){const e=y.Tb();y.Sb(0,"div",14),y.dc("click",function(){y.vc(e);const n=t.$implicit;return y.fc(4).openAbsencesService.toggleSort(n)}),y.Dc(1),y.gc(2,"translate"),y.Sb(3,"span",15),y.Dc(4),y.Rb(),y.Rb()}if(2&e){const e=t.$implicit,n=y.fc(3).erzLet,s=y.fc();y.lc("className",e),y.zb(1),y.Fc(" ",y.hc(2,3,"open-absences.list.header."+e)," "),y.zb(3),y.Ec(s.getSortDirectionCharacter(n.sortCriteria,e))}}const R=function(e,t){return["detail",e,t]},w=function(e){return{count:e}};function z(e,t){if(1&e){const e=y.Tb();y.Sb(0,"div"),y.Sb(1,"div",16),y.Sb(2,"div",17),y.dc("click",function(t){y.vc(e);const n=y.uc(4);return y.fc(4).onCheckboxCellClick(t,n)}),y.Sb(3,"input",18,19),y.dc("change",function(){y.vc(e);const n=t.$implicit;return y.fc(4).selectionService.toggle(n)}),y.gc(5,"async"),y.Rb(),y.Rb(),y.Sb(6,"div",20),y.Sb(7,"a",21),y.Dc(8),y.Rb(),y.Rb(),y.Sb(9,"div",22),y.Dc(10),y.Rb(),y.Sb(11,"div",23),y.Dc(12),y.gc(13,"translate"),y.Rb(),y.Sb(14,"div",24),y.Dc(15),y.gc(16,"translate"),y.Rb(),y.Sb(17,"div",25),y.Dc(18),y.gc(19,"erzDaysDifference"),y.Rb(),y.Sb(20,"div",26),y.Dc(21),y.gc(22,"date"),y.Rb(),y.Rb(),y.Rb()}if(2&e){const e=t.$implicit,n=y.fc(4);y.zb(3),y.lc("checked",y.hc(5,9,n.selectionService.isSelected$(e))),y.zb(4),y.lc("routerLink",y.qc(22,R,e.studentId,e.dateString)),y.zb(1),y.Ec(e.studentFullName),y.zb(2),y.Fc(" ",e.studyClassNumber," "),y.zb(2),y.Fc(" ",y.ic(13,11,n.getLessonsCountKey(e),y.pc(25,w,e.lessonsCount))," "),y.zb(3),y.Gc(" ",e.studyClassNumber,", ",y.ic(16,14,n.getLessonsCountKey(e),y.pc(27,w,e.lessonsCount))," "),y.zb(3),y.Fc(" ",y.hc(19,17,e.date)," "),y.zb(3),y.Ec(y.ic(22,19,e.date,"dd.MM.yyyy"))}}const I=function(){return["name","date"]};function E(e,t){if(1&e){const e=y.Tb();y.Qb(0),y.Sb(1,"div",4),y.Sb(2,"erz-resettable-input",5),y.dc("valueChange",function(t){return y.vc(e),y.fc(3).openAbsencesService.search$.next(t)}),y.gc(3,"async"),y.gc(4,"translate"),y.gc(5,"translate"),y.Rb(),y.Sb(6,"div",6),y.Sb(7,"div",7),y.Dc(8),y.gc(9,"translate"),y.Rb(),y.Sb(10,"a",8),y.Sb(11,"i",9),y.Dc(12,"edit"),y.Rb(),y.Rb(),y.Rb(),y.Rb(),y.Sb(13,"div",10),y.Sb(14,"div",11),y.Bc(15,A,5,5,"div",12),y.Rb(),y.Bc(16,z,23,29,"div",13),y.Rb(),y.Pb()}if(2&e){const e=y.fc(2).erzLet,t=y.fc();y.zb(2),y.lc("value",y.hc(3,8,t.openAbsencesService.search$))("placeholder",y.hc(4,10,"open-absences.search-by-name-or-class"))("label",y.hc(5,12,"open-absences.search")),y.zb(6),y.Fc(" ",y.ic(9,14,"open-absences.selected",y.pc(17,w,e.selection.length))," "),y.zb(2),y.Eb("disabled",0===e.selection.length),y.zb(5),y.lc("ngForOf",y.oc(19,I)),y.zb(1),y.lc("ngForOf",e.entries)}}function F(e,t){1&e&&(y.Sb(0,"p",27),y.Dc(1),y.gc(2,"translate"),y.Rb()),2&e&&(y.zb(1),y.Ec(y.hc(2,1,"open-absences.noEntries")))}function D(e,t){if(1&e&&(y.Qb(0),y.Bc(1,E,17,20,"ng-container",1),y.gc(2,"async"),y.Bc(3,F,3,3,"ng-template",null,3,y.Cc),y.Pb()),2&e){const e=y.uc(4),t=y.fc().erzLet,n=y.fc();let s=null;y.zb(1),y.lc("ngIf",(null==(s=y.hc(2,2,n.openAbsencesService.sortedEntries$))?null:s.length)>0||(null==t.entries?null:t.entries.length)>0)("ngIfElse",e)}}function L(e,t){1&e&&y.Nb(0,"erz-spinner")}function N(e,t){if(1&e&&(y.Sb(0,"div"),y.Bc(1,D,5,4,"ng-container",1),y.gc(2,"async"),y.Bc(3,L,1,0,"ng-template",null,2,y.Cc),y.Rb()),2&e){const e=y.uc(4),t=y.fc();y.zb(1),y.lc("ngIf",!y.hc(2,2,t.openAbsencesService.loading$))("ngIfElse",e)}}const T=function(e,t,n){return{selection:e,entries:t,sortCriteria:n}};let K=(()=>{class e{constructor(e,t,n){this.openAbsencesService=e,this.selectionService=t,this.scrollPosition=n,this.destroy$=new r.a}ngOnInit(){this.openAbsencesService.currentDetail=null,this.selectionService.clearNonOpenAbsencesEntries()}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}onCheckboxCellClick(e,t){e.target!==t&&t.click()}getSortDirectionCharacter(e,t){return e.primarySortKey!==t?"":e.ascending?"\u2193":"\u2191"}getLessonsCountKey(e){return"open-absences.list.content.lessonsCount."+(1===e.lessonsCount?"singular":"plural")}}return e.\u0275fac=function(t){return new(t||e)(y.Mb(S),y.Mb(f.a),y.Mb(P.a))},e.\u0275cmp=y.Gb({type:e,selectors:[["erz-open-absences-list"]],decls:4,vars:11,consts:[[4,"erzLet"],[4,"ngIf","ngIfElse"],["loading",""],["noEntries",""],[1,"pt-3","pl-3","pr-3"],[1,"d-flex","header-search",3,"value","placeholder","label","valueChange"],[1,"d-flex","align-items-center","justify-content-between","mt-1"],[1,"selection-count","pl-1"],["routerLink","/open-absences/confirm",1,"edit","btn","btn-primary","mt-1","mb-2"],[1,"material-icons"],[1,"content"],[1,"absence-header"],[3,"className","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"className","click"],[1,"sort-direction"],[1,"absence-entry"],[1,"checkbox",3,"click"],["type","checkbox",1,"form-check-input",3,"checked","change"],["checkbox",""],[1,"name","pr-2"],[3,"routerLink"],[1,"study-class"],[1,"lessons-count"],[1,"study-class-lessons-count"],[1,"days-ago"],[1,"date"],[1,"mt-3"]],template:function(e,t){1&e&&(y.Bc(0,N,5,4,"div",0),y.gc(1,"async"),y.gc(2,"async"),y.gc(3,"async")),2&e&&y.lc("erzLet",y.rc(7,T,y.hc(1,1,t.selectionService.selection$),y.hc(2,3,t.openAbsencesService.filteredEntries$),y.hc(3,5,t.openAbsencesService.sortCriteria$)))},directives:[$.a,M.m,j.a,c.i,M.l,k.a],pipes:[M.b,_.c,x.a,M.e],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.header-search[_ngcontent-%COMP%]{max-width:500px}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-header[_ngcontent-%COMP%]{cursor:pointer;padding:1.5rem;display:grid;grid-template-areas:"name date";grid-template-columns:5fr 1fr;border-top:1px solid #dee2e6;border-bottom:2px solid #dee2e6}.absence-entry[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:grid;grid-template-areas:"checkbox name study-class lessons-count days-ago date";grid-template-columns:-webkit-min-content 2fr 1fr 1fr 1fr 1fr;grid-template-columns:min-content 2fr 1fr 1fr 1fr 1fr}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.name[_ngcontent-%COMP%]{grid-area:name;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#33333d}.lessons-count[_ngcontent-%COMP%]{grid-area:lessons-count}.study-class[_ngcontent-%COMP%]{grid-area:study-class}.study-class-lessons-count[_ngcontent-%COMP%]{grid-area:study-class-lessons-count;display:none}.days-ago[_ngcontent-%COMP%]{color:#6c757d;grid-area:days-ago}.date[_ngcontent-%COMP%]{grid-area:date}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-header[_ngcontent-%COMP%]{grid-template-areas:"name date";grid-template-columns:3fr 2fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox name date" "checkbox study-class-lessons-count days-ago";grid-template-columns:-webkit-min-content 3fr 2fr;grid-template-columns:min-content 3fr 2fr}.study-class-lessons-count[_ngcontent-%COMP%]{display:block}.lessons-count[_ngcontent-%COMP%], .study-class[_ngcontent-%COMP%]{display:none}.days-ago[_ngcontent-%COMP%], .study-class-lessons-count[_ngcontent-%COMP%]{font-size:1.3125rem;color:#adb5bd}}'],changeDetection:0}),e})();var U=n("EY2u"),B=n("eIep"),Z=n("1G5W"),G=n("pLZG"),X=n("K+0v"),J=n("OvQW"),q=n("KJh6"),Q=n("xHFS"),V=n("ke3e"),W=n("04ZB"),Y=n("ZLMY");const H=function(){return["/open-absences"]};function ee(e,t){if(1&e&&(y.Sb(0,"div",2),y.Sb(1,"button",3),y.Sb(2,"div",4),y.Sb(3,"i",5),y.Dc(4,"navigate_before"),y.Rb(),y.Sb(5,"span",6),y.Dc(6),y.gc(7,"async"),y.Rb(),y.Rb(),y.Rb(),y.Rb()),2&e){const e=y.fc();y.zb(1),y.lc("routerLink",y.oc(4,H)),y.zb(5),y.Ec(y.hc(7,2,e.studentFullName$))}}const te=[{path:"",component:C,children:[{path:"",component:K,data:{restoreScrollPositionFrom:["/open-absences/detail/:personId/:date","/open-absences/confirm"]}},{path:"detail/:personId/:date",component:(()=>{class e{constructor(e,t,n,s,c,i,o,l,d){this.router=e,this.route=t,this.openAbsencesService=n,this.presenceTypesService=s,this.personService=c,this.selectionService=i,this.scrollPosition=o,this.translate=l,this.i18n=d,this.absences$=this.route.paramMap.pipe(Object(B.a)(this.getAbsencesForParams.bind(this))),this.hasAbsences$=this.absences$.pipe(Object(b.a)(Object(X.c)(1))),this.studentFullName$=this.absences$.pipe(Object(b.a)(e=>e[0]&&e[0].StudentFullName||null)),this.allSelected$=Object(a.a)([this.absences$,this.selectionService.selection$]).pipe(Object(b.a)(([e,t])=>e.length===t.length)),this.studentEmail$=this.absences$.pipe(Object(b.a)(e=>e[0]&&e[0].StudentRef.Id||null),Object(B.a)(e=>e?this.personService.getByIdWithEmailInfos(e):U.a)),this.translation$=this.studentEmail$.pipe(Object(B.a)(e=>this.translate.getTranslation(this.i18n.getLocalizedLanguage(Object(W.a)(e))))),this.allUnconfirmedAbsencesForStudent$=this.route.paramMap.pipe(Object(B.a)(this.getAbsencesForStudentParam.bind(this))),this.mailTo$=Object(a.a)([this.studentEmail$,this.allUnconfirmedAbsencesForStudent$,this.translation$]).pipe(Object(b.a)(([e,t,n])=>this.openAbsencesService.buildMailToString(e,t,n))),this.destroy$=new r.a}ngOnInit(){this.selectionService.clearNonLessonPresences(),this.route.paramMap.pipe(Object(Z.a)(this.destroy$)).subscribe(e=>this.openAbsencesService.currentDetail={date:String(e.get("date")),personId:Number(e.get("personId"))}),this.hasAbsences$.pipe(Object(Z.a)(this.destroy$),Object(G.a)(Object(J.not)(X.b))).subscribe(()=>this.router.navigate(["/open-absences"]))}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}toggleAll(e){e?this.absences$.pipe(Object(d.a)(1)).subscribe(e=>this.selectionService.clear(e)):this.selectionService.clear()}onRowClick(e,t){e.target!==t&&t.click()}getPresenceTypeDesignation(e){return this.presenceTypesService.displayedTypes$.pipe(Object(b.a)(t=>{var n;return e.TypeRef.Id&&(null===(n=t.find(t=>t.Id===e.TypeRef.Id))||void 0===n?void 0:n.Designation)||null}))}getAbsencesForParams(e){return this.openAbsencesService.getUnconfirmedAbsences(String(e.get("date")),Number(e.get("personId")))}getAbsencesForStudentParam(e){return this.openAbsencesService.getAllUnconfirmedAbsencesForStudent(Number(e.get("personId")))}}return e.\u0275fac=function(t){return new(t||e)(y.Mb(c.g),y.Mb(c.a),y.Mb(S),y.Mb(q.a),y.Mb(Q.a),y.Mb(f.a),y.Mb(P.a),y.Mb(_.d),y.Mb(V.a))},e.\u0275cmp=y.Gb({type:e,selectors:[["erz-open-absences-detail"]],decls:3,vars:8,consts:[["class","d-flex align-items-center justify-content-between",4,"erzLet"],[3,"absences$","selectionService","confirmLink","displayEmail","mailTo$"],[1,"d-flex","align-items-center","justify-content-between"],["type","button",1,"back","btn","btn-link","p-3",3,"routerLink"],[1,"d-flex","align-items-center"],[1,"material-icons"],[1,"ml-3"]],template:function(e,t){1&e&&(y.Bc(0,ee,8,5,"div",0),y.gc(1,"async"),y.Nb(2,"erz-student-profile-absences",1)),2&e&&(y.lc("erzLet",y.hc(1,6,t.selectionService.selection$)),y.zb(2),y.lc("absences$",t.absences$)("selectionService",t.selectionService)("confirmLink","/open-absences/confirm")("displayEmail",!0)("mailTo$",t.mailTo$))},directives:[$.a,Y.a,c.h],pipes:[M.b],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.back[_ngcontent-%COMP%]{color:#33333d;text-decoration:none}.back[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-all[_ngcontent-%COMP%]{grid-template-areas:"checkbox all";grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-all[_ngcontent-%COMP%], .absence-entry[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:grid}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class time teacher" "checkbox presence-type date days-ago";grid-template-columns:-webkit-min-content 2fr 1fr 2fr;grid-template-columns:min-content 2fr 1fr 2fr}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.all[_ngcontent-%COMP%]{grid-area:all}.lesson-class[_ngcontent-%COMP%]{grid-area:lesson-class;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time[_ngcontent-%COMP%]{grid-area:time}.teacher[_ngcontent-%COMP%]{grid-area:teacher}.presence-type[_ngcontent-%COMP%]{color:#adb5bd;grid-area:presence-type}.date[_ngcontent-%COMP%]{grid-area:date}.days-ago[_ngcontent-%COMP%]{color:#adb5bd;grid-area:days-ago}.date-days-ago[_ngcontent-%COMP%]{grid-area:date-days-ago;display:none}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-all[_ngcontent-%COMP%]{grid-template-areas:"checkbox all"}.absence-all[_ngcontent-%COMP%], .absence-entry[_ngcontent-%COMP%]{grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class" "checkbox teacher" "checkbox date-days-ago" "checkbox time" "checkbox presence-type"}.date-days-ago[_ngcontent-%COMP%]{display:block}.date[_ngcontent-%COMP%], .days-ago[_ngcontent-%COMP%]{display:none}}'],changeDetection:0}),e})(),data:{restoreScrollPositionFrom:["/open-absences/confirm"]}},{path:"confirm",component:n("hH5/").a}]}];let ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y.Kb({type:e}),e.\u0275inj=y.Jb({imports:[[c.j.forChild(te)],c.j]}),e})(),se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y.Kb({type:e}),e.\u0275inj=y.Jb({imports:[[s.a,ne]]}),e})()},yl8S:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var s=n("tyNb"),c=n("XNiG"),i=n("LRne"),r=n("pLZG"),o=n("lJxs"),a=n("IzEk"),l=n("5+tZ"),b=n("eIep"),d=n("Y6wi"),p=n("UXun"),u=n("1G5W"),g=n("zP0r"),h=n("fXoL"),m=n("ofXK");let f=(()=>{class e{constructor(e,t){this.router=e,this.viewportScroller=t,this.scrollPositions={},this.previousRoute=null,this.currentRoute=null,this.currentScrollPosition=[0,0],this.destroy$=new c.a,this.scrollPosition$=this.router.events.pipe(Object(r.a)(y),Object(o.a)(this.getScrollPosition.bind(this))),this.activationEnd$=this.router.events.pipe(Object(r.a)(O)),this.navigationEnd$=this.router.events.pipe(Object(r.a)(S)),this.route$=this.activationEnd$.pipe(Object(a.a)(1)).pipe(Object(l.a)(e=>[Object(i.a)(e),this.navigationEnd$.pipe(Object(b.a)(()=>this.activationEnd$.pipe(Object(a.a)(1))))]),Object(d.a)(),Object(o.a)(e=>e.snapshot),Object(p.a)(1)),this.scrollPosition$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>this.currentScrollPosition=e),this.route$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.previousRoute=this.currentRoute,this.currentRoute=e})}ngOnDestroy(){this.destroy$.next()}restore(){if(!this.currentRoute||!this.requiresStoring(this.currentRoute))return;if(this.previousRoute&&this.shouldStoreFor(this.currentRoute,this.previousRoute)){const e=this.getPath(this.currentRoute);this.scrollToPosition(this.scrollPositions[e]||[0,0])}const e=this.currentRoute;this.route$.pipe(Object(g.a)(1),Object(a.a)(1),Object(u.a)(this.destroy$),Object(r.a)(t=>this.shouldStoreFor(e,t))).subscribe(()=>{const t=this.getPath(e);this.scrollPositions[t]=this.currentScrollPosition})}getScrollPosition(){return this.viewportScroller.getScrollPosition()}scrollToPosition(e){this.viewportScroller.scrollToPosition(e)}getPath(e){return e?"/"+e.pathFromRoot.map(e=>e.routeConfig&&e.routeConfig.path).filter(e=>e).join("/"):"/"}requiresStoring(e){return Boolean(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)&&e.routeConfig.data.restoreScrollPositionFrom.length>0)}shouldStoreFor(e,t){return(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)?e.routeConfig.data.restoreScrollPositionFrom:[]).includes(this.getPath(t))}}return e.\u0275fac=function(t){return new(t||e)(h.Zb(s.g),h.Zb(m.t))},e.\u0275prov=h.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function O(e){return e instanceof s.b}function y(e){return e instanceof s.e}function S(e){return e instanceof s.d}}}]);